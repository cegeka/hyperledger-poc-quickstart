<app-banner></app-banner>

<div class="container">
    <div class="jumbotron">
        <h1><i class="fa fa-user"></i> {{ this.userService.loggedInUserName }}</h1>
        <br>
        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#updateAccountModal">
            Update account
        </button> 
    </div>

    <div class="row">
        <div class="col-md-12">

            <!-- transaction alerts -->
            <div class="alert alert-success alert-dismissible" id="alert-success1" role="alert" style="display:none;">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>       
                    <a href="#" class="alert-link">You successfully updated your account.</a>
            </div>
            
            <div class="" style="text-align:center;">
                <!-- spinner -->
                <div class="mdl-spin" id="spinner1">
                    <svg class="spinner" width="35px" height="35px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                        <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
                    </svg>
                </div>  
            </div>

            <!-- Account information -->
            <form>
                <div class="form-group">
                    <label for="accountUsername">Username</label>
                    <input disabled type="text" class="form-control" id="accountUsername" aria-describedby="emailHelp" value="{{ this.userService.loggedInUserName }}">
                </div>

                <div class="form-group">
                    <label for="passwordUser">Password</label>
                    <input disabled type="text" class="form-control" id="passwordUser" value="{{ this.userService.loggedInUser.password }}">
                </div>

                <div class="form-group">
                    <label for="accountFirstName">First name</label>
                    <input disabled type="text" class="form-control" id="accountFirstName" aria-describedby="emailHelp" value="{{ this.userService.loggedInUser.firstName }}">
                </div>

                <div class="form-group">
                    <label for="accountLastName">Last name</label>
                    <input disabled type="text" class="form-control" id="accountLastName" aria-describedby="emailHelp" value="{{ this.userService.loggedInUser.lastName }}">
                </div>
            </form>

        </div>
    </div>

    <!-- Update Account modal -->
    <div class="modal fade" id="updateAccountModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Update Account</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="customerId">Customer ID</label>
                                <input id="id2" type="text" class="form-control" #id2 disabled>
                            </div>
                            <div class="form-group">
                                    <label for="customerId">Password</label>
                                    <input onchange="myFunction()" id="passwordAccount" aria-describedby="passwordHelp" type="text" class="form-control" #passwordAccount>
                                    <small id="passwordHelp" class="form-text text-muted">Write your new password here. The application stores the hash of your password.</small>
                                    <input style="visibility: hidden; display: none;" id="passwordAccountHashResult" type="text" class="form-control" #passwordAccountHashResult>
                                </div>
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input id="firstName2" type="text" class="form-control" #firstName2>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input id="lastName2" type="text" class="form-control" #lastName2>
                            </div>  
                        </form>     
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button (click) = "updateAccount(id2.value, passwordAccountHashResult.value, firstName2.value, lastName2.value)" type="button" class="btn btn-primary" data-dismiss="modal">Update</button>
                    </div>
                </div>
            </div>
        </div>

</div>